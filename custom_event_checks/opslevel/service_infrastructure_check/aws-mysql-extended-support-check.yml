---
version: 1
kind: generic
spec:
  name: AWS MySQL Extended Support Check
  serviceSelector: ".[] | .aliases[0]"
  successCondition: |-
    def semver($i): $i | [splits("[.-]") | tonumber? // .];
    [.[] | select(.name == $ctx.alias) | .relatedResources.nodes[] | select(.type == "Database") | select(.rawData.engine == "aurora-mysql") | (.rawData.engine_version | split(".mysql_aurora.")) | ((.[0]|tonumber) == 8.0) and (semver(.[1]) >= semver("3.05.2")) ] | all
  message: |
    {% if check.passed %}
      ### Check passed

      Service **{{ ctx.alias }}** has all mysql databases up to date!

      {%- assign resources = data | where: "name", ctx.alias  %}
      {% for resource in resources %}
      {% assign dbs = resource.relatedResources.nodes | where: "type", "Database" %}
      {% for db in dbs %}
      {% assign pg_db = db.rawData | where: "engine", "aurora-mysql" | first %}
      {% if pg_db %}
      * {{ pg_db.db_instance_identifier }} - {{ pg_db.engine_version }}
      {% endif %}
      {% endfor %}
      {% endfor %}

    {% else %}
      ### Check failed
      Service **{{ ctx.alias }}** has mysql databases running on version 5.7.mysql_aurora.2.11.5.  These databases need to be upgraded to 8.0.mysql_aurora.3.05.2 or newer.

      {%- assign resources = data | where: "name", ctx.alias  %}
      {% for resource in resources %}
      {% assign dbs = resource.relatedResources.nodes | where: "type", "Database" %}
      {% for db in dbs %}
      {% assign pg_db = db.rawData | where: "engine", "aurora-mysql" | first %}
      {% if pg_db %}
      {% if pg_db.engine_version == "5.7.mysql_aurora.2.11.5" %}
      * {{ pg_db.db_instance_identifier }} - {{ pg_db.engine_version }}
      {% endif %}
      {% endif %}
      {% endfor %}
      {% endfor %}
    {% endif %}
  samplePayload: '[{"id":"Z2lkOi8vb3BzbGV2ZWwvU2VydmljZS85ODQwNA","name":"catalog-service","aliases":["catalog-service","catalog-service-dev","catalog-service-production","catalog-service-qa"],"relatedResources":{"nodes":[{"id":"Z2lkOi8vb3BzbGV2ZWwvRW50aXR5T2JqZWN0LzE4OTc1MDU","href":"/catalog/infrastructure/1897505","name":"catalog-service-production-1","type":"Database","rawData":{"arn":"arn:aws:rds:us-east-1:987654321234:db:catalog-service-production-1","type":"db_instance","engine":"aurora-mysql","endpoint":{"port":3306,"address":"catalog-service-production-1.cz82hm9c0joa.us-east-1.rds.amazonaws.com","hosted_zone_id":"Z2R2ITUGPM61AM"},"multi_az":false,"tag_list":[{"key":"Cluster","value":"catalog-service"},{"key":"Environment","value":"production"},{"key":"ManagedBy","value":"terraform"},{"key":"Accounting","value":"100"},{"key":"ManagedByRepo","value":"https://github.com/favordelivery/tf-catalog-service"}],"kms_key_id":"arn:aws:kms:us-east-1:987654321234:key/0f66ad49-a8a6-4075-9246-4415cc158e5b","network_type":"IPV4","storage_type":"aurora","backup_target":"region","license_model":"general-public-license","engine_version":"8.0.mysql_aurora.3.05.2","promotion_tier":1,"db_instance_arn":"arn:aws:rds:us-east-1:987654321234:db:catalog-service-production-1","db_subnet_group":{"vpc_id":"vpc-729ef717","subnets":[{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-457dc81c","subnet_availability_zone":{"name":"us-east-1c"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-058ad259b0e88f1a8","subnet_availability_zone":{"name":"us-east-1f"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-037b3ceacb205e983","subnet_availability_zone":{"name":"us-east-1a"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-418c064d","subnet_availability_zone":{"name":"us-east-1f"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-47861330","subnet_availability_zone":{"name":"us-east-1b"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-13d8b776","subnet_availability_zone":{"name":"us-east-1d"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-f3b4c4c9","subnet_availability_zone":{"name":"us-east-1e"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-0c2d4ba6fffa02018","subnet_availability_zone":{"name":"us-east-1d"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-e808d8c3","subnet_availability_zone":{"name":"us-east-1a"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-0efd2260219426e61","subnet_availability_zone":{"name":"us-east-1b"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-011c137c33603b686","subnet_availability_zone":{"name":"us-east-1c"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-0fbd7e0b0e01a88d3","subnet_availability_zone":{"name":"us-east-1d"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-003139ac33fdcd0c2","subnet_availability_zone":{"name":"us-east-1c"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-0c00f75f5915e7675","subnet_availability_zone":{"name":"us-east-1d"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-0f02137a422d43c7a","subnet_availability_zone":{"name":"us-east-1c"}}],"subnet_group_status":"Complete","db_subnet_group_name":"catalog-service-production","db_subnet_group_description":"For
    Aurora cluster catalog-service-production"},"dbi_resource_id":"db-IEBZ7C7VXFJXNSTWKHWHVOZ2RI","master_username":"gandalf","associated_roles":[],"db_instance_port":0,"allocated_storage":1,"availability_zone":"us-east-1b","db_instance_class":"db.r6g.xlarge","storage_encrypted":true,"db_instance_status":"available","db_security_groups":[],"domain_memberships":[],"certificate_details":{"valid_till":"2025-06-26T07:23:14.000000Z","ca_identifier":"rds-ca-rsa2048-g1"},"db_parameter_groups":[{"parameter_apply_status":"in-sync","db_parameter_group_name":"default.aurora-mysql8.0"}],"deletion_protection":false,"monitoring_interval":10,"monitoring_role_arn":"arn:aws:iam::987654321234:role/rds-enhanced-monitoring-catalog-service-production","publicly_accessible":false,"vpc_security_groups":[{"status":"active","vpc_security_group_id":"sg-0b386ff67a31e932b"}],"dedicated_log_volume":false,"instance_create_time":"2019-10-08T11:10:13.147000Z","copy_tags_to_snapshot":false,"db_cluster_identifier":"catalog-service-production","db_instance_identifier":"catalog-service-production-1","backup_retention_period":7,"pending_modified_values":{},"preferred_backup_window":"04:00-06:00","option_group_memberships":[{"status":"in-sync","option_group_name":"default:aurora-mysql-8-0"}],"ca_certificate_identifier":"rds-ca-rsa2048-g1","customer_owned_ip_enabled":false,"auto_minor_version_upgrade":true,"performance_insights_enabled":true,"preferred_maintenance_window":"mon:07:00-mon:08:00","enabled_cloudwatch_logs_exports":["audit"],"performance_insights_kms_key_id":"arn:aws:kms:us-east-1:987654321234:key/0f66ad49-a8a6-4075-9246-4415cc158e5b","enhanced_monitoring_resource_arn":"arn:aws:logs:us-east-1:987654321234:log-group:RDSOSMetrics:log-stream:db-IEBZ7C7VXFJXNSTWKHWHVOZ2RI","iam_database_authentication_enabled":false,"read_replica_db_instance_identifiers":[],"performance_insights_retention_period":7},"__typename":"InfrastructureResource"},{"id":"Z2lkOi8vb3BzbGV2ZWwvRW50aXR5T2JqZWN0LzIxNjcyNjA","href":"/catalog/infrastructure/2167260","name":"catalog-service-production-2","type":"Database","rawData":{"arn":"arn:aws:rds:us-east-1:987654321234:db:catalog-service-production-2","type":"db_instance","engine":"aurora-mysql","endpoint":{"port":3306,"address":"catalog-service-production-2.cz82hm9c0joa.us-east-1.rds.amazonaws.com","hosted_zone_id":"Z2R2ITUGPM61AM"},"multi_az":false,"tag_list":[{"key":"Cluster","value":"catalog-service"},{"key":"Environment","value":"production"},{"key":"ManagedBy","value":"terraform"},{"key":"Accounting","value":"100"},{"key":"ManagedByRepo","value":"https://github.com/favordelivery/tf-catalog-service"}],"kms_key_id":"arn:aws:kms:us-east-1:987654321234:key/0f66ad49-a8a6-4075-9246-4415cc158e5b","network_type":"IPV4","storage_type":"aurora","backup_target":"region","license_model":"general-public-license","engine_version":"8.0.mysql_aurora.3.05.2","promotion_tier":2,"db_instance_arn":"arn:aws:rds:us-east-1:987654321234:db:catalog-service-production-2","db_subnet_group":{"vpc_id":"vpc-729ef717","subnets":[{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-457dc81c","subnet_availability_zone":{"name":"us-east-1c"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-058ad259b0e88f1a8","subnet_availability_zone":{"name":"us-east-1f"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-037b3ceacb205e983","subnet_availability_zone":{"name":"us-east-1a"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-418c064d","subnet_availability_zone":{"name":"us-east-1f"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-47861330","subnet_availability_zone":{"name":"us-east-1b"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-13d8b776","subnet_availability_zone":{"name":"us-east-1d"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-f3b4c4c9","subnet_availability_zone":{"name":"us-east-1e"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-0c2d4ba6fffa02018","subnet_availability_zone":{"name":"us-east-1d"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-e808d8c3","subnet_availability_zone":{"name":"us-east-1a"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-0efd2260219426e61","subnet_availability_zone":{"name":"us-east-1b"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-011c137c33603b686","subnet_availability_zone":{"name":"us-east-1c"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-0fbd7e0b0e01a88d3","subnet_availability_zone":{"name":"us-east-1d"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-003139ac33fdcd0c2","subnet_availability_zone":{"name":"us-east-1c"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-0c00f75f5915e7675","subnet_availability_zone":{"name":"us-east-1d"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-0f02137a422d43c7a","subnet_availability_zone":{"name":"us-east-1c"}}],"subnet_group_status":"Complete","db_subnet_group_name":"catalog-service-production","db_subnet_group_description":"For
    Aurora cluster catalog-service-production"},"dbi_resource_id":"db-N7MG36FIXYXYOGJDCK33L3SQG4","master_username":"gandalf","associated_roles":[],"db_instance_port":0,"allocated_storage":1,"availability_zone":"us-east-1c","db_instance_class":"db.r6g.xlarge","storage_encrypted":true,"db_instance_status":"available","db_security_groups":[],"domain_memberships":[],"storage_throughput":0,"certificate_details":{"valid_till":"2025-06-26T07:22:00.000000Z","ca_identifier":"rds-ca-rsa2048-g1"},"db_parameter_groups":[{"parameter_apply_status":"in-sync","db_parameter_group_name":"default.aurora-mysql8.0"}],"deletion_protection":false,"monitoring_interval":10,"monitoring_role_arn":"arn:aws:iam::987654321234:role/rds-enhanced-monitoring-catalog-service-production","publicly_accessible":false,"vpc_security_groups":[{"status":"active","vpc_security_group_id":"sg-0b386ff67a31e932b"}],"dedicated_log_volume":false,"instance_create_time":"2024-04-23T21:52:14.134000Z","copy_tags_to_snapshot":false,"db_cluster_identifier":"catalog-service-production","db_instance_identifier":"catalog-service-production-2","backup_retention_period":7,"pending_modified_values":{},"preferred_backup_window":"04:00-06:00","option_group_memberships":[{"status":"in-sync","option_group_name":"default:aurora-mysql-8-0"}],"ca_certificate_identifier":"rds-ca-rsa2048-g1","customer_owned_ip_enabled":false,"auto_minor_version_upgrade":true,"performance_insights_enabled":true,"preferred_maintenance_window":"mon:07:00-mon:08:00","enabled_cloudwatch_logs_exports":["audit"],"performance_insights_kms_key_id":"arn:aws:kms:us-east-1:987654321234:key/0f66ad49-a8a6-4075-9246-4415cc158e5b","enhanced_monitoring_resource_arn":"arn:aws:logs:us-east-1:987654321234:log-group:RDSOSMetrics:log-stream:db-N7MG36FIXYXYOGJDCK33L3SQG4","iam_database_authentication_enabled":false,"read_replica_db_instance_identifiers":[],"performance_insights_retention_period":7},"__typename":"InfrastructureResource"},{"id":"Z2lkOi8vb3BzbGV2ZWwvRW50aXR5T2JqZWN0LzE4OTc1MDg","href":"/catalog/infrastructure/1897508","name":"legacy-dev-mysql-57","type":"Database","rawData":{"arn":"arn:aws:rds:us-east-1:987654321234:db:legacy-dev-mysql-57","type":"db_instance","engine":"aurora-mysql","endpoint":{"port":3306,"address":"legacy-dev-mysql-57.cz82hm9c0joa.us-east-1.rds.amazonaws.com","hosted_zone_id":"Z2R2ITUGPM61AM"},"multi_az":false,"tag_list":[],"kms_key_id":"arn:aws:kms:us-east-1:987654321234:key/0f66ad49-a8a6-4075-9246-4415cc158e5b","network_type":"IPV4","storage_type":"aurora","backup_target":"region","license_model":"general-public-license","engine_version":"8.0.mysql_aurora.3.05.2","promotion_tier":1,"db_instance_arn":"arn:aws:rds:us-east-1:987654321234:db:legacy-dev-mysql-57","db_subnet_group":{"vpc_id":"vpc-729ef717","subnets":[{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-011c137c33603b686","subnet_availability_zone":{"name":"us-east-1c"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-0fbd7e0b0e01a88d3","subnet_availability_zone":{"name":"us-east-1d"}}],"subnet_group_status":"Complete","db_subnet_group_name":"default-dev-private","db_subnet_group_description":"dev
    private subnets in default vpc"},"dbi_resource_id":"db-VCMBHGTP6MYL46DYWNHFUXZFHU","master_username":"gandalf","associated_roles":[],"db_instance_port":0,"allocated_storage":1,"availability_zone":"us-east-1c","db_instance_class":"db.t3.medium","storage_encrypted":true,"db_instance_status":"available","db_security_groups":[],"domain_memberships":[],"certificate_details":{"valid_till":"2025-06-26T06:56:11.000000Z","ca_identifier":"rds-ca-rsa2048-g1"},"db_parameter_groups":[{"parameter_apply_status":"in-sync","db_parameter_group_name":"default.aurora-mysql8.0"}],"deletion_protection":false,"monitoring_interval":0,"publicly_accessible":false,"vpc_security_groups":[{"status":"active","vpc_security_group_id":"sg-27de7343"}],"dedicated_log_volume":false,"instance_create_time":"2020-09-23T02:02:39.300999Z","copy_tags_to_snapshot":false,"db_cluster_identifier":"legacy-dev-mysql-57-cluster","db_instance_identifier":"legacy-dev-mysql-57","backup_retention_period":7,"pending_modified_values":{},"preferred_backup_window":"01:48-03:48","option_group_memberships":[{"status":"in-sync","option_group_name":"default:aurora-mysql-8-0"}],"ca_certificate_identifier":"rds-ca-rsa2048-g1","customer_owned_ip_enabled":false,"auto_minor_version_upgrade":true,"performance_insights_enabled":false,"preferred_maintenance_window":"fri:05:44-fri:06:14","iam_database_authentication_enabled":true,"read_replica_db_instance_identifiers":[]},"__typename":"InfrastructureResource"},{"id":"Z2lkOi8vb3BzbGV2ZWwvRW50aXR5T2JqZWN0LzE4OTc1MDQ","href":"/catalog/infrastructure/1897504","name":"catalog-service-production-0","type":"Database","rawData":{"arn":"arn:aws:rds:us-east-1:987654321234:db:catalog-service-production-0","type":"db_instance","engine":"aurora-mysql","endpoint":{"port":3306,"address":"catalog-service-production-0.cz82hm9c0joa.us-east-1.rds.amazonaws.com","hosted_zone_id":"Z2R2ITUGPM61AM"},"multi_az":false,"tag_list":[{"key":"Environment","value":"production"},{"key":"YACE","value":"enabled"}],"kms_key_id":"arn:aws:kms:us-east-1:987654321234:key/0f66ad49-a8a6-4075-9246-4415cc158e5b","network_type":"IPV4","storage_type":"aurora","backup_target":"region","license_model":"general-public-license","engine_version":"8.0.mysql_aurora.3.05.2","promotion_tier":1,"db_instance_arn":"arn:aws:rds:us-east-1:987654321234:db:catalog-service-production-0","db_subnet_group":{"vpc_id":"vpc-729ef717","subnets":[{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-457dc81c","subnet_availability_zone":{"name":"us-east-1c"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-058ad259b0e88f1a8","subnet_availability_zone":{"name":"us-east-1f"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-037b3ceacb205e983","subnet_availability_zone":{"name":"us-east-1a"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-418c064d","subnet_availability_zone":{"name":"us-east-1f"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-47861330","subnet_availability_zone":{"name":"us-east-1b"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-13d8b776","subnet_availability_zone":{"name":"us-east-1d"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-f3b4c4c9","subnet_availability_zone":{"name":"us-east-1e"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-0c2d4ba6fffa02018","subnet_availability_zone":{"name":"us-east-1d"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-e808d8c3","subnet_availability_zone":{"name":"us-east-1a"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-0efd2260219426e61","subnet_availability_zone":{"name":"us-east-1b"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-011c137c33603b686","subnet_availability_zone":{"name":"us-east-1c"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-0fbd7e0b0e01a88d3","subnet_availability_zone":{"name":"us-east-1d"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-003139ac33fdcd0c2","subnet_availability_zone":{"name":"us-east-1c"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-0c00f75f5915e7675","subnet_availability_zone":{"name":"us-east-1d"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-0f02137a422d43c7a","subnet_availability_zone":{"name":"us-east-1c"}}],"subnet_group_status":"Complete","db_subnet_group_name":"catalog-service-production","db_subnet_group_description":"For
    Aurora cluster catalog-service-production"},"dbi_resource_id":"db-BFF3JRML7LSPADD6RYO2GSOJZI","master_username":"gandalf","associated_roles":[],"db_instance_port":0,"allocated_storage":1,"availability_zone":"us-east-1a","db_instance_class":"db.r6g.xlarge","storage_encrypted":true,"db_instance_status":"available","db_security_groups":[],"domain_memberships":[],"certificate_details":{"valid_till":"2025-06-26T07:25:05.000000Z","ca_identifier":"rds-ca-rsa2048-g1"},"db_parameter_groups":[{"parameter_apply_status":"in-sync","db_parameter_group_name":"default.aurora-mysql8.0"}],"deletion_protection":false,"monitoring_interval":0,"publicly_accessible":false,"vpc_security_groups":[{"status":"active","vpc_security_group_id":"sg-0b386ff67a31e932b"}],"dedicated_log_volume":false,"instance_create_time":"2019-05-14T13:57:03.411000Z","copy_tags_to_snapshot":false,"db_cluster_identifier":"catalog-service-production","db_instance_identifier":"catalog-service-production-0","backup_retention_period":7,"pending_modified_values":{},"preferred_backup_window":"04:00-06:00","option_group_memberships":[{"status":"in-sync","option_group_name":"default:aurora-mysql-8-0"}],"ca_certificate_identifier":"rds-ca-rsa2048-g1","customer_owned_ip_enabled":false,"auto_minor_version_upgrade":true,"performance_insights_enabled":true,"preferred_maintenance_window":"mon:10:00-mon:11:00","enabled_cloudwatch_logs_exports":["audit"],"performance_insights_kms_key_id":"arn:aws:kms:us-east-1:987654321234:key/0f66ad49-a8a6-4075-9246-4415cc158e5b","iam_database_authentication_enabled":false,"read_replica_db_instance_identifiers":[],"performance_insights_retention_period":7},"__typename":"InfrastructureResource"},{"id":"Z2lkOi8vb3BzbGV2ZWwvRW50aXR5T2JqZWN0LzE4OTc1MTA","href":"/catalog/infrastructure/1897510","name":"qa-mysql-57-read","type":"Database","rawData":{"arn":"arn:aws:rds:us-east-1:987654321234:db:qa-mysql-57-read","type":"db_instance","engine":"aurora-mysql","endpoint":{"port":3306,"address":"qa-mysql-57-read.cz82hm9c0joa.us-east-1.rds.amazonaws.com","hosted_zone_id":"Z2R2ITUGPM61AM"},"multi_az":false,"tag_list":[],"kms_key_id":"arn:aws:kms:us-east-1:987654321234:key/0f66ad49-a8a6-4075-9246-4415cc158e5b","network_type":"IPV4","storage_type":"aurora","backup_target":"region","license_model":"general-public-license","engine_version":"8.0.mysql_aurora.3.05.2","promotion_tier":1,"db_instance_arn":"arn:aws:rds:us-east-1:987654321234:db:qa-mysql-57-read","db_subnet_group":{"vpc_id":"vpc-b795edd3","subnets":[{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-89bb15ff","subnet_availability_zone":{"name":"us-east-1b"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-c1884899","subnet_availability_zone":{"name":"us-east-1c"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-d9619cf3","subnet_availability_zone":{"name":"us-east-1a"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-3033a30d","subnet_availability_zone":{"name":"us-east-1e"}}],"subnet_group_status":"Complete","db_subnet_group_name":"default-vpc-b795edd3","db_subnet_group_description":"Created
    from the RDS Management Console"},"dbi_resource_id":"db-VCN5YZ5LTTL2QMWA3HHYXEGFYM","master_username":"gandalf","associated_roles":[],"db_instance_port":0,"allocated_storage":1,"availability_zone":"us-east-1b","db_instance_class":"db.t3.medium","storage_encrypted":true,"db_instance_status":"available","db_security_groups":[],"domain_memberships":[],"certificate_details":{"valid_till":"2025-06-26T06:59:08.000000Z","ca_identifier":"rds-ca-rsa2048-g1"},"db_parameter_groups":[{"parameter_apply_status":"in-sync","db_parameter_group_name":"default.aurora-mysql8.0"}],"deletion_protection":false,"monitoring_interval":0,"publicly_accessible":false,"vpc_security_groups":[{"status":"active","vpc_security_group_id":"sg-8dc487f4"}],"dedicated_log_volume":false,"instance_create_time":"2019-12-12T18:29:13.717000Z","copy_tags_to_snapshot":false,"db_cluster_identifier":"qa-mysql-57","db_instance_identifier":"qa-mysql-57-read","backup_retention_period":7,"pending_modified_values":{},"preferred_backup_window":"04:00-06:00","option_group_memberships":[{"status":"in-sync","option_group_name":"default:aurora-mysql-8-0"}],"ca_certificate_identifier":"rds-ca-rsa2048-g1","customer_owned_ip_enabled":false,"auto_minor_version_upgrade":false,"performance_insights_enabled":false,"preferred_maintenance_window":"tue:09:12-tue:09:42","enabled_cloudwatch_logs_exports":["audit","error","general","slowquery"],"iam_database_authentication_enabled":true,"read_replica_db_instance_identifiers":[]},"__typename":"InfrastructureResource"},{"id":"Z2lkOi8vb3BzbGV2ZWwvRW50aXR5T2JqZWN0LzE4OTc1MDk","href":"/catalog/infrastructure/1897509","name":"qa-mysql-57","type":"Database","rawData":{"arn":"arn:aws:rds:us-east-1:987654321234:db:qa-mysql-57","type":"db_instance","engine":"aurora-mysql","endpoint":{"port":3306,"address":"qa-mysql-57.cz82hm9c0joa.us-east-1.rds.amazonaws.com","hosted_zone_id":"Z2R2ITUGPM61AM"},"multi_az":false,"tag_list":[{"key":"workload-type","value":"other"}],"kms_key_id":"arn:aws:kms:us-east-1:987654321234:key/0f66ad49-a8a6-4075-9246-4415cc158e5b","network_type":"IPV4","storage_type":"aurora","backup_target":"region","license_model":"general-public-license","engine_version":"8.0.mysql_aurora.3.05.2","promotion_tier":1,"db_instance_arn":"arn:aws:rds:us-east-1:987654321234:db:qa-mysql-57","db_subnet_group":{"vpc_id":"vpc-b795edd3","subnets":[{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-89bb15ff","subnet_availability_zone":{"name":"us-east-1b"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-c1884899","subnet_availability_zone":{"name":"us-east-1c"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-d9619cf3","subnet_availability_zone":{"name":"us-east-1a"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-3033a30d","subnet_availability_zone":{"name":"us-east-1e"}}],"subnet_group_status":"Complete","db_subnet_group_name":"default-vpc-b795edd3","db_subnet_group_description":"Created
    from the RDS Management Console"},"dbi_resource_id":"db-4ZHSJ6AIVVN6GDCD5MXYBF4GQE","master_username":"gandalf","associated_roles":[],"db_instance_port":0,"allocated_storage":1,"availability_zone":"us-east-1c","db_instance_class":"db.t3.medium","storage_encrypted":true,"db_instance_status":"available","db_security_groups":[],"domain_memberships":[],"certificate_details":{"valid_till":"2025-06-26T06:56:11.000000Z","ca_identifier":"rds-ca-rsa2048-g1"},"db_parameter_groups":[{"parameter_apply_status":"in-sync","db_parameter_group_name":"default.aurora-mysql8.0"}],"deletion_protection":false,"monitoring_interval":0,"publicly_accessible":true,"vpc_security_groups":[{"status":"active","vpc_security_group_id":"sg-8dc487f4"}],"dedicated_log_volume":false,"instance_create_time":"2018-12-19T15:25:37.121999Z","copy_tags_to_snapshot":true,"db_cluster_identifier":"qa-mysql-57","db_instance_identifier":"qa-mysql-57","backup_retention_period":7,"pending_modified_values":{},"preferred_backup_window":"04:00-06:00","option_group_memberships":[{"status":"in-sync","option_group_name":"default:aurora-mysql-8-0"}],"ca_certificate_identifier":"rds-ca-rsa2048-g1","customer_owned_ip_enabled":false,"auto_minor_version_upgrade":true,"performance_insights_enabled":false,"preferred_maintenance_window":"tue:09:12-tue:09:42","enabled_cloudwatch_logs_exports":["audit","error","general","slowquery"],"iam_database_authentication_enabled":true,"read_replica_db_instance_identifiers":[]},"__typename":"InfrastructureResource"}]}},{"id":"Z2lkOi8vb3BzbGV2ZWwvU2VydmljZS85ODQwNA","name":"shopping-cart","aliases":["shopping-cart","shopping-cart-dev","shopping-cart-production","shopping-cart-qa"],"relatedResources":{"nodes":[{},{"id":"Z2lkOi8vb3BzbGV2ZWwvRW50aXR5T2JqZWN0LzEwNTc1ODA","href":"/catalog/infrastructure/1057580","name":"shopping-cart-dev-2","type":"Database","rawData":{"arn":"arn:aws:rds:us-east-1:987654321234:db:shopping-cart-dev-2","type":"db_instance","engine":"aurora-mysql","db_name":"shopping-cart","endpoint":{"port":3306,"address":"shopping-cart-dev-2.crumauhrp0lw.us-east-1.rds.amazonaws.com","hosted_zone_id":"Z2R2ITUGPM61AM"},"multi_az":false,"tag_list":[{"key":"Cluster","value":"shopping-cart"},{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"terraform"},{"key":"Accounting","value":"200"}],"kms_key_id":"arn:aws:kms:us-east-1:987654321234:key/9886c027-3292-4456-aa57-4fdf107905cd","network_type":"IPV4","storage_type":"aurora","backup_target":"region","license_model":"general-public-license","engine_version":"5.7.mysql_aurora.2.11.5","promotion_tier":2,"db_instance_arn":"arn:aws:rds:us-east-1:987654321234:db:shopping-cart-dev-2","db_subnet_group":{"vpc_id":"vpc-0b28432c3a2a8bcc2","subnets":[{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-0e01fd24af2db80b7","subnet_availability_zone":{"name":"us-east-1a"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-0d56d3c9c73f08ac4","subnet_availability_zone":{"name":"us-east-1b"}}],"subnet_group_status":"Complete","db_subnet_group_name":"shopping-cart-dev","db_subnet_group_description":"For
    Aurora cluster shopping-cart-dev"},"dbi_resource_id":"db-RM5IBZCKDBWZT73YVVU2K4BS7A","master_username":"gandalf","associated_roles":[],"db_instance_port":0,"allocated_storage":1,"availability_zone":"us-east-1b","db_instance_class":"db.t4g.medium","storage_encrypted":true,"db_instance_status":"available","db_security_groups":[],"domain_memberships":[],"certificate_details":{"valid_till":"2025-08-21T17:17:20.000000Z","ca_identifier":"rds-ca-ecc384-g1"},"db_parameter_groups":[{"parameter_apply_status":"in-sync","db_parameter_group_name":"default.aurora-mysql5.7"}],"deletion_protection":false,"monitoring_interval":0,"monitoring_role_arn":"arn:aws:iam::987654321234:role/rds-enhanced-monitoring-shopping-cart-dev","publicly_accessible":false,"vpc_security_groups":[{"status":"active","vpc_security_group_id":"sg-0881f0b38bd028e2d"}],"dedicated_log_volume":false,"instance_create_time":"2020-07-24T21:53:25.681999Z","copy_tags_to_snapshot":false,"db_cluster_identifier":"shopping-cart-dev","db_instance_identifier":"shopping-cart-dev-2","backup_retention_period":7,"pending_modified_values":{},"preferred_backup_window":"04:00-06:00","option_group_memberships":[{"status":"in-sync","option_group_name":"default:aurora-mysql-5-7"}],"ca_certificate_identifier":"rds-ca-ecc384-g1","customer_owned_ip_enabled":false,"auto_minor_version_upgrade":true,"performance_insights_enabled":true,"preferred_maintenance_window":"sun:07:00-sun:09:00","enabled_cloudwatch_logs_exports":["audit"],"performance_insights_kms_key_id":"arn:aws:kms:us-east-1:987654321234:key/9886c027-3292-4456-aa57-4fdf107905cd","enhanced_monitoring_resource_arn":"arn:aws:logs:us-east-1:987654321234:log-group:RDSOSMetrics:log-stream:db-RM5IBZCKDBWZT73YVVU2K4BS7A","iam_database_authentication_enabled":false,"read_replica_db_instance_identifiers":[],"performance_insights_retention_period":7},"__typename":"InfrastructureResource"},{"id":"Z2lkOi8vb3BzbGV2ZWwvRW50aXR5T2JqZWN0LzEwNTc1ODI","href":"/catalog/infrastructure/1057582","name":"shopping-cart-qa-1","type":"Database","rawData":{"arn":"arn:aws:rds:us-east-1:987654321234:db:shopping-cart-qa-1","type":"db_instance","engine":"aurora-mysql","db_name":"shopping-cart","endpoint":{"port":3306,"address":"shopping-cart-qa-1.crumauhrp0lw.us-east-1.rds.amazonaws.com","hosted_zone_id":"Z2R2ITUGPM61AM"},"multi_az":false,"tag_list":[{"key":"Cluster","value":"shopping-cart"},{"key":"Environment","value":"qa"},{"key":"ManagedBy","value":"terraform"},{"key":"Accounting","value":"200"}],"kms_key_id":"arn:aws:kms:us-east-1:987654321234:key/9886c027-3292-4456-aa57-4fdf107905cd","network_type":"IPV4","storage_type":"aurora","backup_target":"region","license_model":"general-public-license","engine_version":"5.7.mysql_aurora.2.11.5","promotion_tier":1,"db_instance_arn":"arn:aws:rds:us-east-1:987654321234:db:shopping-cart-qa-1","db_subnet_group":{"vpc_id":"vpc-0b28432c3a2a8bcc2","subnets":[{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-0e01fd24af2db80b7","subnet_availability_zone":{"name":"us-east-1a"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-0d56d3c9c73f08ac4","subnet_availability_zone":{"name":"us-east-1b"}}],"subnet_group_status":"Complete","db_subnet_group_name":"shopping-cart-qa","db_subnet_group_description":"For
    Aurora cluster shopping-cart-qa"},"dbi_resource_id":"db-R22MB22RXU3M7MY2GD4ITWQTTM","master_username":"gandalf","associated_roles":[],"db_instance_port":0,"allocated_storage":1,"availability_zone":"us-east-1b","db_instance_class":"db.t4g.medium","storage_encrypted":true,"db_instance_status":"available","db_security_groups":[],"domain_memberships":[],"certificate_details":{"valid_till":"2025-08-21T17:17:41.000000Z","ca_identifier":"rds-ca-ecc384-g1"},"db_parameter_groups":[{"parameter_apply_status":"in-sync","db_parameter_group_name":"default.aurora-mysql5.7"}],"deletion_protection":false,"monitoring_interval":0,"monitoring_role_arn":"arn:aws:iam::987654321234:role/rds-enhanced-monitoring-shopping-cart-qa","publicly_accessible":false,"vpc_security_groups":[{"status":"active","vpc_security_group_id":"sg-0f90a12a5aab8cbc6"}],"dedicated_log_volume":false,"instance_create_time":"2020-01-08T16:07:36.177999Z","copy_tags_to_snapshot":false,"db_cluster_identifier":"shopping-cart-qa","db_instance_identifier":"shopping-cart-qa-1","backup_retention_period":7,"pending_modified_values":{},"preferred_backup_window":"04:00-06:00","option_group_memberships":[{"status":"in-sync","option_group_name":"default:aurora-mysql-5-7"}],"ca_certificate_identifier":"rds-ca-ecc384-g1","customer_owned_ip_enabled":false,"auto_minor_version_upgrade":true,"performance_insights_enabled":true,"preferred_maintenance_window":"sun:07:00-sun:09:00","enabled_cloudwatch_logs_exports":["audit"],"performance_insights_kms_key_id":"arn:aws:kms:us-east-1:987654321234:key/9886c027-3292-4456-aa57-4fdf107905cd","enhanced_monitoring_resource_arn":"arn:aws:logs:us-east-1:987654321234:log-group:RDSOSMetrics:log-stream:db-R22MB22RXU3M7MY2GD4ITWQTTM","iam_database_authentication_enabled":false,"read_replica_db_instance_identifiers":[],"performance_insights_retention_period":7},"__typename":"InfrastructureResource"},{"id":"Z2lkOi8vb3BzbGV2ZWwvRW50aXR5T2JqZWN0LzE4OTczNzY","href":"/catalog/infrastructure/1897376","name":"shopping-cart-production-1","type":"Database","rawData":{"arn":"arn:aws:rds:us-east-1:394807190565:db:shopping-cart-production-1","type":"db_instance","engine":"aurora-mysql","db_name":"shopping-cart","endpoint":{"port":3306,"address":"shopping-cart-production-1.cyzg0vm9rdfu.us-east-1.rds.amazonaws.com","hosted_zone_id":"Z2R2ITUGPM61AM"},"multi_az":false,"tag_list":[{"key":"Cluster","value":"shopping-cart"},{"key":"Environment","value":"production"},{"key":"ManagedBy","value":"terraform"},{"key":"Accounting","value":"200"}],"kms_key_id":"arn:aws:kms:us-east-1:394807190565:key/1e2b62e0-51fa-4fc0-955a-15fcf0816d67","network_type":"IPV4","storage_type":"aurora","backup_target":"region","license_model":"general-public-license","engine_version":"5.7.mysql_aurora.2.11.5","promotion_tier":1,"db_instance_arn":"arn:aws:rds:us-east-1:394807190565:db:shopping-cart-production-1","db_subnet_group":{"vpc_id":"vpc-034eafe32072f52df","subnets":[{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-023bad4e8320252e8","subnet_availability_zone":{"name":"us-east-1a"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-067cbf2f7375865bc","subnet_availability_zone":{"name":"us-east-1c"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-0ef78f3701c2d4a13","subnet_availability_zone":{"name":"us-east-1d"}}],"subnet_group_status":"Complete","db_subnet_group_name":"shopping-cart-production","db_subnet_group_description":"For
    Aurora cluster shopping-cart-production"},"dbi_resource_id":"db-CCQO735HZI3AOWSOQ43VR4HAOU","master_username":"gandalf","associated_roles":[],"db_instance_port":0,"allocated_storage":1,"availability_zone":"us-east-1c","db_instance_class":"db.r6g.large","storage_encrypted":true,"db_instance_status":"available","db_security_groups":[],"domain_memberships":[],"certificate_details":{"valid_till":"2025-08-21T18:26:07.000000Z","ca_identifier":"rds-ca-ecc384-g1"},"db_parameter_groups":[{"parameter_apply_status":"in-sync","db_parameter_group_name":"default.aurora-mysql5.7"}],"deletion_protection":false,"monitoring_interval":0,"monitoring_role_arn":"arn:aws:iam::394807190565:role/rds-enhanced-monitoring-shopping-cart-production","publicly_accessible":false,"vpc_security_groups":[{"status":"active","vpc_security_group_id":"sg-089581f552b8e2b23"}],"dedicated_log_volume":false,"instance_create_time":"2020-01-09T16:09:26.751000Z","copy_tags_to_snapshot":false,"db_cluster_identifier":"shopping-cart-production","db_instance_identifier":"shopping-cart-production-1","backup_retention_period":7,"pending_modified_values":{},"preferred_backup_window":"04:00-06:00","option_group_memberships":[{"status":"in-sync","option_group_name":"default:aurora-mysql-5-7"}],"ca_certificate_identifier":"rds-ca-ecc384-g1","customer_owned_ip_enabled":false,"auto_minor_version_upgrade":true,"performance_insights_enabled":true,"preferred_maintenance_window":"sun:07:00-sun:09:00","enabled_cloudwatch_logs_exports":["audit"],"performance_insights_kms_key_id":"arn:aws:kms:us-east-1:394807190565:key/1e2b62e0-51fa-4fc0-955a-15fcf0816d67","enhanced_monitoring_resource_arn":"arn:aws:logs:us-east-1:394807190565:log-group:RDSOSMetrics:log-stream:db-CCQO735HZI3AOWSOQ43VR4HAOU","iam_database_authentication_enabled":false,"read_replica_db_instance_identifiers":[],"performance_insights_retention_period":7},"__typename":"InfrastructureResource"},{"id":"Z2lkOi8vb3BzbGV2ZWwvRW50aXR5T2JqZWN0LzEwNTc1ODQ","href":"/catalog/infrastructure/1057584","name":"shopping-cart-qa-2","type":"Database","rawData":{"arn":"arn:aws:rds:us-east-1:987654321234:db:shopping-cart-qa-2","type":"db_instance","engine":"aurora-mysql","db_name":"shopping-cart","endpoint":{"port":3306,"address":"shopping-cart-qa-2.crumauhrp0lw.us-east-1.rds.amazonaws.com","hosted_zone_id":"Z2R2ITUGPM61AM"},"multi_az":false,"tag_list":[{"key":"Cluster","value":"shopping-cart"},{"key":"Environment","value":"qa"},{"key":"ManagedBy","value":"terraform"},{"key":"Accounting","value":"200"}],"kms_key_id":"arn:aws:kms:us-east-1:987654321234:key/9886c027-3292-4456-aa57-4fdf107905cd","network_type":"IPV4","storage_type":"aurora","backup_target":"region","license_model":"general-public-license","engine_version":"5.7.mysql_aurora.2.11.5","promotion_tier":2,"db_instance_arn":"arn:aws:rds:us-east-1:987654321234:db:shopping-cart-qa-2","db_subnet_group":{"vpc_id":"vpc-0b28432c3a2a8bcc2","subnets":[{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-0e01fd24af2db80b7","subnet_availability_zone":{"name":"us-east-1a"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-0d56d3c9c73f08ac4","subnet_availability_zone":{"name":"us-east-1b"}}],"subnet_group_status":"Complete","db_subnet_group_name":"shopping-cart-qa","db_subnet_group_description":"For
    Aurora cluster shopping-cart-qa"},"dbi_resource_id":"db-OJYE4T7MLTRCS7XJPFSQRYN4G4","master_username":"gandalf","associated_roles":[],"db_instance_port":0,"allocated_storage":1,"availability_zone":"us-east-1a","db_instance_class":"db.t4g.medium","storage_encrypted":true,"db_instance_status":"available","db_security_groups":[],"domain_memberships":[],"storage_throughput":0,"certificate_details":{"valid_till":"2025-08-21T17:17:52.000000Z","ca_identifier":"rds-ca-ecc384-g1"},"db_parameter_groups":[{"parameter_apply_status":"in-sync","db_parameter_group_name":"default.aurora-mysql5.7"}],"deletion_protection":false,"monitoring_interval":0,"publicly_accessible":false,"vpc_security_groups":[{"status":"active","vpc_security_group_id":"sg-0f90a12a5aab8cbc6"}],"dedicated_log_volume":false,"instance_create_time":"2023-12-01T18:45:43.614000Z","copy_tags_to_snapshot":false,"db_cluster_identifier":"shopping-cart-qa","db_instance_identifier":"shopping-cart-qa-2","backup_retention_period":7,"pending_modified_values":{},"preferred_backup_window":"04:00-06:00","option_group_memberships":[{"status":"in-sync","option_group_name":"default:aurora-mysql-5-7"}],"ca_certificate_identifier":"rds-ca-ecc384-g1","customer_owned_ip_enabled":false,"auto_minor_version_upgrade":true,"performance_insights_enabled":true,"preferred_maintenance_window":"sun:07:00-sun:09:00","enabled_cloudwatch_logs_exports":["audit"],"performance_insights_kms_key_id":"arn:aws:kms:us-east-1:987654321234:key/9886c027-3292-4456-aa57-4fdf107905cd","iam_database_authentication_enabled":false,"read_replica_db_instance_identifiers":[],"performance_insights_retention_period":7},"__typename":"InfrastructureResource"},{"id":"Z2lkOi8vb3BzbGV2ZWwvRW50aXR5T2JqZWN0LzEwNTc1Nzg","href":"/catalog/infrastructure/1057578","name":"shopping-cart-dev-1","type":"Database","rawData":{"arn":"arn:aws:rds:us-east-1:987654321234:db:shopping-cart-dev-1","type":"db_instance","engine":"aurora-mysql","db_name":"shopping-cart","endpoint":{"port":3306,"address":"shopping-cart-dev-1.crumauhrp0lw.us-east-1.rds.amazonaws.com","hosted_zone_id":"Z2R2ITUGPM61AM"},"multi_az":false,"tag_list":[{"key":"Cluster","value":"shopping-cart"},{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"terraform"},{"key":"Accounting","value":"200"}],"kms_key_id":"arn:aws:kms:us-east-1:987654321234:key/9886c027-3292-4456-aa57-4fdf107905cd","network_type":"IPV4","storage_type":"aurora","backup_target":"region","license_model":"general-public-license","engine_version":"5.7.mysql_aurora.2.11.5","promotion_tier":1,"db_instance_arn":"arn:aws:rds:us-east-1:987654321234:db:shopping-cart-dev-1","db_subnet_group":{"vpc_id":"vpc-0b28432c3a2a8bcc2","subnets":[{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-0e01fd24af2db80b7","subnet_availability_zone":{"name":"us-east-1a"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-0d56d3c9c73f08ac4","subnet_availability_zone":{"name":"us-east-1b"}}],"subnet_group_status":"Complete","db_subnet_group_name":"shopping-cart-dev","db_subnet_group_description":"For
    Aurora cluster shopping-cart-dev"},"dbi_resource_id":"db-IDQ6LFMVUXCJA5RT6TBPWJMHUM","master_username":"gandalf","associated_roles":[],"db_instance_port":0,"allocated_storage":1,"availability_zone":"us-east-1a","db_instance_class":"db.t4g.medium","storage_encrypted":true,"db_instance_status":"available","db_security_groups":[],"domain_memberships":[],"storage_throughput":0,"certificate_details":{"valid_till":"2025-08-21T17:17:19.000000Z","ca_identifier":"rds-ca-ecc384-g1"},"db_parameter_groups":[{"parameter_apply_status":"in-sync","db_parameter_group_name":"default.aurora-mysql5.7"}],"deletion_protection":false,"monitoring_interval":0,"monitoring_role_arn":"arn:aws:iam::987654321234:role/rds-enhanced-monitoring-shopping-cart-dev","publicly_accessible":false,"vpc_security_groups":[{"status":"active","vpc_security_group_id":"sg-0881f0b38bd028e2d"}],"dedicated_log_volume":false,"instance_create_time":"2023-12-01T17:32:30.294000Z","copy_tags_to_snapshot":false,"db_cluster_identifier":"shopping-cart-dev","db_instance_identifier":"shopping-cart-dev-1","backup_retention_period":7,"pending_modified_values":{},"preferred_backup_window":"04:00-06:00","option_group_memberships":[{"status":"in-sync","option_group_name":"default:aurora-mysql-5-7"}],"ca_certificate_identifier":"rds-ca-ecc384-g1","customer_owned_ip_enabled":false,"auto_minor_version_upgrade":true,"performance_insights_enabled":true,"preferred_maintenance_window":"sun:07:00-sun:09:00","enabled_cloudwatch_logs_exports":["audit"],"performance_insights_kms_key_id":"arn:aws:kms:us-east-1:987654321234:key/9886c027-3292-4456-aa57-4fdf107905cd","enhanced_monitoring_resource_arn":"arn:aws:logs:us-east-1:987654321234:log-group:RDSOSMetrics:log-stream:db-IDQ6LFMVUXCJA5RT6TBPWJMHUM","iam_database_authentication_enabled":false,"read_replica_db_instance_identifiers":[],"performance_insights_retention_period":7},"__typename":"InfrastructureResource"},{"id":"Z2lkOi8vb3BzbGV2ZWwvRW50aXR5T2JqZWN0LzE4OTczNzc","href":"/catalog/infrastructure/1897377","name":"shopping-cart-production-2","type":"Database","rawData":{"arn":"arn:aws:rds:us-east-1:394807190565:db:shopping-cart-production-2","type":"db_instance","engine":"aurora-mysql","db_name":"shopping-cart","endpoint":{"port":3306,"address":"shopping-cart-production-2.cyzg0vm9rdfu.us-east-1.rds.amazonaws.com","hosted_zone_id":"Z2R2ITUGPM61AM"},"multi_az":false,"tag_list":[{"key":"Cluster","value":"shopping-cart"},{"key":"Environment","value":"production"},{"key":"ManagedBy","value":"terraform"},{"key":"Accounting","value":"200"}],"kms_key_id":"arn:aws:kms:us-east-1:394807190565:key/1e2b62e0-51fa-4fc0-955a-15fcf0816d67","network_type":"IPV4","storage_type":"aurora","backup_target":"region","license_model":"general-public-license","engine_version":"5.7.mysql_aurora.2.11.5","promotion_tier":2,"db_instance_arn":"arn:aws:rds:us-east-1:394807190565:db:shopping-cart-production-2","db_subnet_group":{"vpc_id":"vpc-034eafe32072f52df","subnets":[{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-023bad4e8320252e8","subnet_availability_zone":{"name":"us-east-1a"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-067cbf2f7375865bc","subnet_availability_zone":{"name":"us-east-1c"}},{"subnet_status":"Active","subnet_outpost":{},"subnet_identifier":"subnet-0ef78f3701c2d4a13","subnet_availability_zone":{"name":"us-east-1d"}}],"subnet_group_status":"Complete","db_subnet_group_name":"shopping-cart-production","db_subnet_group_description":"For
    Aurora cluster shopping-cart-production"},"dbi_resource_id":"db-FKMB67U6HQGKBNKQA4EJYSIES4","master_username":"gandalf","associated_roles":[],"db_instance_port":0,"allocated_storage":1,"availability_zone":"us-east-1d","db_instance_class":"db.r6g.large","storage_encrypted":true,"db_instance_status":"available","db_security_groups":[],"domain_memberships":[],"storage_throughput":0,"certificate_details":{"valid_till":"2025-08-21T18:26:20.000000Z","ca_identifier":"rds-ca-ecc384-g1"},"db_parameter_groups":[{"parameter_apply_status":"in-sync","db_parameter_group_name":"default.aurora-mysql5.7"}],"deletion_protection":false,"monitoring_interval":0,"publicly_accessible":false,"vpc_security_groups":[{"status":"active","vpc_security_group_id":"sg-089581f552b8e2b23"}],"dedicated_log_volume":false,"instance_create_time":"2023-12-05T04:37:12.700999Z","copy_tags_to_snapshot":false,"db_cluster_identifier":"shopping-cart-production","db_instance_identifier":"shopping-cart-production-2","backup_retention_period":7,"pending_modified_values":{},"preferred_backup_window":"04:00-06:00","option_group_memberships":[{"status":"in-sync","option_group_name":"default:aurora-mysql-5-7"}],"ca_certificate_identifier":"rds-ca-ecc384-g1","customer_owned_ip_enabled":false,"auto_minor_version_upgrade":true,"performance_insights_enabled":true,"preferred_maintenance_window":"sun:07:00-sun:09:00","enabled_cloudwatch_logs_exports":["audit"],"performance_insights_kms_key_id":"arn:aws:kms:us-east-1:394807190565:key/1e2b62e0-51fa-4fc0-955a-15fcf0816d67","iam_database_authentication_enabled":false,"read_replica_db_instance_identifiers":[],"performance_insights_retention_period":7},"__typename":"InfrastructureResource"}]}}]'
  sampleQueryParams: alias[]=service1&alias[]=service2
  notes: MySQL 5.7 has entered into extended support. This means every database instance
    which is still running on mySQL5.7 costs us an additional ~137/mo. This is per
    instance, not per cluster.  This cost is 3x the cost of the actual instance in
    many cases; for example all of the t3.mediums running in dev/qa.
